<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sistem ERP - Login</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --ios-blue: #007AFF;
            --ios-blue-hover: #0051D5;
            --ios-teal: #5AC8FA;
            --ios-green: #34C759;
            --ios-red: #FF3B30;
            --ios-orange: #FF9500;
            --ios-yellow: #FFCC00;
            --ios-gray: #8E8E93;
            --ios-gray-2: #AEAEB2;
            --ios-gray-3: #C7C7CC;
            --ios-gray-4: #D1D1D6;
            --ios-gray-5: #E5E5EA;
            --ios-gray-6: #F2F2F7;
            --ios-label: #000000;
            --ios-label-secondary: #3C3C43;
            --ios-label-tertiary: #3C3C4399;
            --ios-bg: #F2F2F7;
            --ios-bg-secondary: #FFFFFF;
            --ios-separator: #3C3C4329;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', sans-serif;
            background: var(--ios-bg);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 400px;
            animation: fadeInUp 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
            z-index: 1;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Background Particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0.1;
            animation: float linear infinite;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) scale(0);
                opacity: 0;
            }
            50% {
                opacity: 0.1;
            }
            100% {
                transform: translateY(-100vh) scale(1);
                opacity: 0;
            }
        }

        /* Maintenance Banner */
        .maintenance-banner {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, var(--ios-orange) 0%, var(--ios-red) 100%);
            color: white;
            padding: 12px 20px;
            text-align: center;
            font-size: 14px;
            font-weight: 500;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(255, 149, 0, 0.3);
        }

        /* Logo Section */
        .logo-section {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .app-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 16px;
            border-radius: 18px;
            background: linear-gradient(135deg, #007AFF 0%, #5AC8FA 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 20px rgba(0, 122, 255, 0.3);
            position: relative;
        }

        .app-icon svg {
            width: 48px;
            height: 48px;
        }

        /* Biometric Badge */
        .biometric-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            width: 28px;
            height: 28px;
            background: var(--ios-green);
            border-radius: 50%;
            border: 3px solid var(--ios-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .biometric-badge:hover {
            transform: scale(1.1);
        }

        .biometric-badge svg {
            width: 14px;
            height: 14px;
            color: white;
        }

        .app-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--ios-label);
            margin-bottom: 4px;
            letter-spacing: -0.5px;
        }

        .app-subtitle {
            font-size: 15px;
            font-weight: 400;
            color: var(--ios-gray);
            letter-spacing: -0.2px;
        }

        /* User Stats */
        .user-stats {
            display: none;
            gap: 8px;
            justify-content: center;
            margin-top: 16px;
        }

        .stat-badge {
            background: var(--ios-bg-secondary);
            border-radius: 20px;
            padding: 6px 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            font-weight: 500;
            color: var(--ios-label-secondary);
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
        }

        .stat-badge svg {
            width: 16px;
            height: 16px;
        }

        /* Card */
        .login-card {
            background: var(--ios-bg-secondary);
            border-radius: 20px;
            padding: 32px 24px;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 16px;
        }

        .welcome-text {
            font-size: 22px;
            font-weight: 600;
            color: var(--ios-label);
            margin-bottom: 8px;
            letter-spacing: -0.4px;
        }

        .welcome-subtitle {
            font-size: 15px;
            font-weight: 400;
            color: var(--ios-gray);
            margin-bottom: 32px;
            line-height: 1.4;
            letter-spacing: -0.2px;
        }

        /* Session Warning */
        .session-warning {
            display: none;
            background: rgba(255, 149, 0, 0.1);
            border: 1px solid var(--ios-orange);
            border-radius: 12px;
            padding: 12px 16px;
            margin-bottom: 20px;
            animation: slideDown 0.3s ease;
        }

        .session-warning.show {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .session-warning svg {
            width: 20px;
            height: 20px;
            color: var(--ios-orange);
            flex-shrink: 0;
        }

        .session-warning-text {
            font-size: 14px;
            color: var(--ios-label-secondary);
            letter-spacing: -0.1px;
        }

        /* Form */
        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            color: var(--ios-label-secondary);
            margin-bottom: 8px;
            letter-spacing: -0.08px;
        }

        .input-wrapper {
            position: relative;
        }

        .form-input {
            width: 100%;
            padding: 14px 16px;
            font-size: 17px;
            font-weight: 400;
            color: var(--ios-label);
            background: var(--ios-gray-6);
            border: 1px solid transparent;
            border-radius: 12px;
            outline: none;
            transition: all 0.2s ease;
            letter-spacing: -0.4px;
        }

        .form-input:focus {
            background: var(--ios-bg-secondary);
            border-color: var(--ios-blue);
            box-shadow: 0 0 0 4px rgba(0, 122, 255, 0.1);
        }

        .form-input.has-error {
            border-color: var(--ios-red);
            background: rgba(255, 59, 48, 0.05);
        }

        .form-input.has-error:focus {
            box-shadow: 0 0 0 4px rgba(255, 59, 48, 0.1);
        }

        .input-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--ios-gray);
            pointer-events: none;
        }

        .input-icon svg {
            width: 20px;
            height: 20px;
        }

        .form-input.with-icon {
            padding-left: 48px;
        }

        .toggle-password {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--ios-gray);
            cursor: pointer;
            padding: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.2s;
        }

        .toggle-password:hover {
            color: var(--ios-blue);
        }

        .toggle-password svg {
            width: 20px;
            height: 20px;
        }

        /* Password Strength Indicator */
        .password-strength {
            margin-top: 8px;
            display: none;
        }

        .password-strength.show {
            display: block;
        }

        .strength-bars {
            display: flex;
            gap: 4px;
            margin-bottom: 4px;
        }

        .strength-bar {
            flex: 1;
            height: 3px;
            background: var(--ios-gray-5);
            border-radius: 2px;
            transition: all 0.3s;
        }

        .strength-bar.active {
            background: var(--ios-blue);
        }

        .strength-bar.weak {
            background: var(--ios-red);
        }

        .strength-bar.medium {
            background: var(--ios-orange);
        }

        .strength-bar.strong {
            background: var(--ios-green);
        }

        .strength-text {
            font-size: 12px;
            color: var(--ios-gray);
        }

        /* Error Message */
        .error-message {
            display: none;
            margin-top: 8px;
            font-size: 13px;
            color: var(--ios-red);
            animation: shake 0.3s;
        }

        .error-message.show {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-4px); }
            75% { transform: translateX(4px); }
        }

        .error-message svg {
            width: 14px;
            height: 14px;
            flex-shrink: 0;
        }

        /* Remember Me */
        .remember-section {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .checkbox-wrapper {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        .custom-checkbox {
            position: relative;
            width: 20px;
            height: 20px;
        }

        .custom-checkbox input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .checkmark {
            position: absolute;
            top: 0;
            left: 0;
            height: 20px;
            width: 20px;
            background-color: var(--ios-gray-6);
            border-radius: 6px;
            transition: all 0.2s;
        }

        .custom-checkbox input:checked ~ .checkmark {
            background-color: var(--ios-blue);
        }

        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
            left: 7px;
            top: 3px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }

        .custom-checkbox input:checked ~ .checkmark:after {
            display: block;
        }

        .checkbox-label {
            font-size: 15px;
            color: var(--ios-label);
            cursor: pointer;
            user-select: none;
        }

        .forgot-link {
            font-size: 15px;
            color: var(--ios-blue);
            text-decoration: none;
            transition: color 0.2s;
        }

        .forgot-link:hover {
            color: var(--ios-blue-hover);
        }

        /* Login Button */
        .login-btn {
            width: 100%;
            padding: 16px;
            background: var(--ios-blue);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .login-btn:hover:not(:disabled) {
            background: var(--ios-blue-hover);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
        }

        .login-btn:active:not(:disabled) {
            transform: translateY(0);
        }

        .login-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .login-btn.loading .btn-text {
            opacity: 0;
        }

        .login-btn .spinner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.6s linear infinite;
            opacity: 0;
        }

        .login-btn.loading .spinner {
            opacity: 1;
        }

        @keyframes spin {
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: 8px;
            margin-top: 16px;
        }

        .action-btn {
            flex: 1;
            padding: 12px;
            background: var(--ios-bg-secondary);
            border: 1px solid var(--ios-separator);
            border-radius: 12px;
            font-size: 13px;
            font-weight: 500;
            color: var(--ios-blue);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .action-btn:hover {
            background: var(--ios-gray-6);
            border-color: var(--ios-blue);
        }

        .action-btn svg {
            width: 16px;
            height: 16px;
        }

        /* Info Card */
        .info-card {
            background: var(--ios-bg-secondary);
            border-radius: 16px;
            padding: 16px;
            box-shadow: 0 1px 10px rgba(0, 0, 0, 0.05);
        }

        .info-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--ios-label);
            margin-bottom: 8px;
        }

        .info-text {
            font-size: 13px;
            color: var(--ios-gray);
            line-height: 1.5;
        }

        .info-link {
            display: inline-block;
            margin-top: 8px;
            font-size: 13px;
            color: var(--ios-blue);
            text-decoration: none;
            font-weight: 500;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            z-index: 1000;
            animation: fadeIn 0.3s;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        .modal-content {
            background: var(--ios-bg-secondary);
            border-radius: 20px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 24px 24px 16px;
            border-bottom: 1px solid var(--ios-separator);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--ios-label);
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--ios-gray-6);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: var(--ios-gray-5);
        }

        .modal-close svg {
            width: 16px;
            height: 16px;
            color: var(--ios-gray);
        }

        .modal-body {
            padding: 24px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            background: var(--ios-gray-6);
            padding: 4px;
            border-radius: 12px;
        }

        .tab {
            flex: 1;
            padding: 10px 16px;
            background: transparent;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            color: var(--ios-gray);
            cursor: pointer;
            transition: all 0.2s;
        }

        .tab.active {
            background: var(--ios-bg-secondary);
            color: var(--ios-blue);
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* History Item */
        .history-item {
            padding: 16px;
            background: var(--ios-gray-6);
            border-radius: 12px;
            margin-bottom: 8px;
            transition: all 0.2s;
        }

        .history-item:hover {
            background: var(--ios-gray-5);
        }

        .history-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .history-status {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-badge.success {
            background: rgba(52, 199, 89, 0.15);
            color: var(--ios-green);
        }

        .status-badge.failed {
            background: rgba(255, 59, 48, 0.15);
            color: var(--ios-red);
        }

        .history-time {
            font-size: 13px;
            color: var(--ios-gray);
        }

        .history-details {
            font-size: 14px;
            color: var(--ios-label-secondary);
            line-height: 1.4;
        }

        .history-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 8px;
            font-size: 12px;
            color: var(--ios-gray);
        }

        .history-meta span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* Device Item */
        .device-item {
            padding: 16px;
            background: var(--ios-gray-6);
            border-radius: 12px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .device-icon {
            width: 40px;
            height: 40px;
            background: var(--ios-bg-secondary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .device-info {
            flex: 1;
        }

        .device-name {
            font-size: 14px;
            font-weight: 500;
            color: var(--ios-label);
            margin-bottom: 2px;
        }

        .device-detail {
            font-size: 12px;
            color: var(--ios-gray);
        }

        .device-badge {
            padding: 4px 10px;
            background: var(--ios-green);
            color: white;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        /* Export Buttons */
        .export-actions {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
        }

        .export-btn {
            flex: 1;
            padding: 10px 16px;
            background: var(--ios-blue);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            transition: all 0.2s;
        }

        .export-btn:hover {
            background: var(--ios-blue-hover);
            transform: translateY(-1px);
        }

        .export-btn svg {
            width: 14px;
            height: 14px;
        }

        /* Keyboard Shortcuts Hint */
        .shortcut-hint {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px 20px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
            backdrop-filter: blur(10px);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 2000;
        }

        .shortcut-hint.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* Confetti Canvas */
        #confettiCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
            display: none;
        }

        /* Responsive */
        @media (max-width: 480px) {
            .container {
                max-width: 100%;
            }

            .login-card {
                padding: 24px 20px;
            }

            .welcome-text {
                font-size: 20px;
            }

            .modal-content {
                max-width: 100%;
            }
        }

        /* Loading State */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--ios-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            animation: fadeOut 0.5s 0.5s forwards;
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                visibility: hidden;
            }
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid var(--ios-gray-5);
            border-top-color: var(--ios-blue);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            :root {
                --ios-label: #FFFFFF;
                --ios-label-secondary: #EBEBF5;
                --ios-label-tertiary: #EBEBF599;
                --ios-bg: #000000;
                --ios-bg-secondary: #1C1C1E;
                --ios-separator: #EBEBF529;
                --ios-gray-6: #2C2C2E;
                --ios-gray-5: #3A3A3C;
                --ios-gray-4: #48484A;
            }

            .form-input {
                background: var(--ios-gray-6);
            }

            .action-btn {
                background: var(--ios-gray-6);
            }

            .modal-close {
                background: var(--ios-gray-6);
            }
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Background Particles -->
    <div class="particles" id="particles"></div>

    <!-- Confetti Canvas -->
    <canvas id="confettiCanvas"></canvas>

    <!-- Maintenance Banner -->
    <div class="maintenance-banner" id="maintenanceBanner">
        ‚ö†Ô∏è Sistem sedang dalam mode pemeliharaan. Beberapa fitur mungkin tidak tersedia.
    </div>

    <div class="container">
        <!-- Logo Section -->
        <div class="logo-section">
            <div class="app-icon">
                <svg viewBox="0 0 24 24" fill="white" stroke="none">
                    <rect x="3" y="3" width="7" height="7" rx="1"/>
                    <rect x="14" y="3" width="7" height="7" rx="1"/>
                    <rect x="3" y="14" width="7" height="7" rx="1"/>
                    <rect x="14" y="14" width="7" height="7" rx="1"/>
                </svg>
                <div class="biometric-badge" onclick="handleBiometric()" title="Login dengan Face ID / Touch ID">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                    </svg>
                </div>
            </div>
            <h1 class="app-title">Sistem ERP</h1>
            <p class="app-subtitle">Enterprise Resource Planning</p>
            
            <!-- User Stats -->
            <div class="user-stats" id="userStats">
                <div class="stat-badge">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                    </svg>
                    <span id="streakCount">0</span> hari
                </div>
                <div class="stat-badge">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="8" r="5"/>
                        <path d="M3 21h18"/>
                    </svg>
                    <span id="badgeCount">0</span> badge
                </div>
            </div>
        </div>

        <!-- Login Card -->
        <div class="login-card">
            <h2 class="welcome-text">Selamat Datang</h2>
            <p class="welcome-subtitle">Silakan masuk untuk mengakses dashboard</p>

            <!-- Session Warning -->
            <div class="session-warning" id="sessionWarning">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="12" y1="8" x2="12" y2="12"/>
                    <line x1="12" y1="16" x2="12.01" y2="16"/>
                </svg>
                <span class="session-warning-text">
                    Sesi Anda akan berakhir dalam <span id="sessionTimer"></span>
                </span>
            </div>

            <!-- Login Form -->
            <form onsubmit="handleLogin(event)" autocomplete="off">
                <div class="form-group">
                    <label class="form-label" for="username">Username</label>
                    <div class="input-wrapper">
                        <div class="input-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                <circle cx="12" cy="7" r="4"/>
                            </svg>
                        </div>
                        <input 
                            type="text" 
                            class="form-input with-icon" 
                            id="username" 
                            placeholder="Masukkan username"
                            autocomplete="username"
                            required
                        >
                    </div>
                    <div class="error-message" id="usernameError">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <circle cx="12" cy="12" r="10"/>
                            <path fill="white" d="M12 8v4M12 16h.01"/>
                        </svg>
                        <span></span>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="password">Password</label>
                    <div class="input-wrapper">
                        <div class="input-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                            </svg>
                        </div>
                        <input 
                            type="password" 
                            class="form-input with-icon" 
                            id="password" 
                            placeholder="Masukkan password"
                            autocomplete="current-password"
                            required
                        >
                        <button type="button" class="toggle-password" onclick="togglePassword()">
                            <svg id="eyeIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                        </button>
                    </div>
                    <div class="password-strength" id="passwordStrength">
                        <div class="strength-bars">
                            <div class="strength-bar"></div>
                            <div class="strength-bar"></div>
                            <div class="strength-bar"></div>
                            <div class="strength-bar"></div>
                        </div>
                        <div class="strength-text"></div>
                    </div>
                    <div class="error-message" id="passwordError">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <circle cx="12" cy="12" r="10"/>
                            <path fill="white" d="M12 8v4M12 16h.01"/>
                        </svg>
                        <span></span>
                    </div>
                </div>

                <div class="remember-section">
                    <label class="checkbox-wrapper">
                        <div class="custom-checkbox">
                            <input type="checkbox" id="rememberMe">
                            <span class="checkmark"></span>
                        </div>
                        <span class="checkbox-label">Ingat saya</span>
                    </label>
                    <a href="#" class="forgot-link" onclick="showToast('info', 'Lupa Password', 'Hubungi administrator untuk reset password'); return false;">Lupa password?</a>
                </div>

                <button type="submit" class="login-btn" id="loginBtn">
                    <span class="btn-text">Masuk</span>
                    <span class="spinner"></span>
                </button>

                <div class="quick-actions">
                    <button type="button" class="action-btn" onclick="openHistoryModal()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12 6 12 12 16 14"/>
                        </svg>
                        Riwayat
                    </button>
                    <button type="button" class="action-btn" onclick="handleBiometric()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"/>
                        </svg>
                        Sidik Jari
                    </button>
                </div>
            </form>
        </div>

    </div>

    <!-- History Modal -->
    <div class="modal" id="historyModal" onclick="closeModalOnBackdrop(event)">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Riwayat Login</h3>
                <button class="modal-close" onclick="closeHistoryModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <!-- Export Actions -->
                <div class="export-actions">
                    <button class="export-btn" onclick="exportHistory('json')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                        Export JSON
                    </button>
                    <button class="export-btn" onclick="exportHistory('csv')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                        Export CSV
                    </button>
                </div>

                <!-- Tabs -->
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('activity')">Aktivitas</button>
                    <button class="tab" onclick="switchTab('devices')">Perangkat</button>
                </div>

                <!-- Activity Tab -->
                <div class="tab-content active" id="activityTab">
                    <div id="historyList"></div>
                </div>

                <!-- Devices Tab -->
                <div class="tab-content" id="devicesTab">
                    <div id="devicesList"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // CONFIGURATION
        const CONFIG = {
            CORRECT_PASSWORD: 'admin123',
            SESSION_TIMEOUT: 30 * 60 * 1000, // 30 minutes
            SESSION_WARNING: 5 * 60 * 1000, // 5 minutes warning
            MAX_LOGIN_ATTEMPTS: 5,
            LOCKOUT_TIME: 15 * 60 * 1000, // 15 minutes
        };

        // GLOBAL VARIABLES
        let loginHistory = [];
        let sessionTimer = null;
        let sessionWarningTimer = null;
        let maintenanceMode = false;
        let loginAttempts = 0;
        let lockoutUntil = null;

        // 1. BACKGROUND PARTICLES
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            const colors = ['#007AFF', '#5AC8FA', '#34C759', '#FF9500'];
            
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.width = (Math.random() * 10 + 5) + 'px';
                particle.style.height = particle.style.width;
                particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particle.style.animationDelay = Math.random() * 5 + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // 2. CONFETTI ANIMATION
        function showConfetti() {
            const canvas = document.getElementById('confettiCanvas');
            const ctx = canvas.getContext('2d');
            
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            canvas.style.display = 'block';
            
            const confetti = [];
            const colors = ['#007AFF', '#5AC8FA', '#34C759', '#FF9500', '#FF3B30'];
            
            for (let i = 0; i < 100; i++) {
                confetti.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    size: Math.random() * 5 + 5,
                    speedY: Math.random() * 3 + 2,
                    speedX: Math.random() * 2 - 1,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    rotation: Math.random() * 360,
                    rotationSpeed: Math.random() * 10 - 5
                });
            }
            
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                confetti.forEach((p, index) => {
                    ctx.save();
                    ctx.translate(p.x, p.y);
                    ctx.rotate(p.rotation * Math.PI / 180);
                    ctx.fillStyle = p.color;
                    ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);
                    ctx.restore();
                    
                    p.y += p.speedY;
                    p.x += p.speedX;
                    p.rotation += p.rotationSpeed;
                    
                    if (p.y > canvas.height) {
                        confetti.splice(index, 1);
                    }
                });
                
                if (confetti.length > 0) {
                    requestAnimationFrame(animate);
                } else {
                    canvas.style.display = 'none';
                }
            }
            
            animate();
        }

        // 3. PASSWORD VISIBILITY TOGGLE
        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const eyeIcon = document.getElementById('eyeIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.innerHTML = `
                    <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
                    <line x1="1" y1="1" x2="23" y2="23"/>
                `;
            } else {
                passwordInput.type = 'password';
                eyeIcon.innerHTML = `
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                    <circle cx="12" cy="12" r="3"/>
                `;
            }
        }

        // 4. PASSWORD STRENGTH INDICATOR
        function setupPasswordStrengthIndicator() {
            const passwordInput = document.getElementById('password');
            const strengthContainer = document.getElementById('passwordStrength');
            
            passwordInput.addEventListener('input', function() {
                const password = this.value;
                
                if (password.length === 0) {
                    strengthContainer.classList.remove('show');
                    return;
                }
                
                strengthContainer.classList.add('show');
                
                let strength = 0;
                const bars = strengthContainer.querySelectorAll('.strength-bar');
                const strengthText = strengthContainer.querySelector('.strength-text');
                
                // Calculate strength
                if (password.length >= 8) strength++;
                if (password.match(/[a-z]/) && password.match(/[A-Z]/)) strength++;
                if (password.match(/[0-9]/)) strength++;
                if (password.match(/[^a-zA-Z0-9]/)) strength++;
                
                // Update bars
                bars.forEach((bar, index) => {
                    bar.classList.remove('active', 'weak', 'medium', 'strong');
                    if (index < strength) {
                        bar.classList.add('active');
                        if (strength === 1) bar.classList.add('weak');
                        else if (strength === 2 || strength === 3) bar.classList.add('medium');
                        else bar.classList.add('strong');
                    }
                });
                
                // Update text
                const strengthLabels = ['Sangat Lemah', 'Lemah', 'Sedang', 'Kuat', 'Sangat Kuat'];
                strengthText.textContent = strengthLabels[strength] || 'Sangat Lemah';
            });
        }

        // 5. VALIDATION
        function validateUsername(username) {
            if (!username || username.trim() === '') {
                return 'Username tidak boleh kosong';
            }
            if (username.length < 3) {
                return 'Username minimal 3 karakter';
            }
            if (!/^[a-zA-Z0-9_]+$/.test(username)) {
                return 'Username hanya boleh huruf, angka, dan underscore';
            }
            return null;
        }

        function validatePassword(password) {
            if (!password || password.trim() === '') {
                return 'Password tidak boleh kosong';
            }
            if (password.length < 6) {
                return 'Password minimal 6 karakter';
            }
            return null;
        }

        function showError(field, message) {
            const input = document.getElementById(field);
            const errorDiv = document.getElementById(field + 'Error');
            
            input.classList.add('has-error');
            errorDiv.querySelector('span').textContent = message;
            errorDiv.classList.add('show');
        }

        function clearError(field) {
            const input = document.getElementById(field);
            const errorDiv = document.getElementById(field + 'Error');
            
            input.classList.remove('has-error');
            errorDiv.classList.remove('show');
        }

        // 6. LOGIN HISTORY
        function loadHistory() {
            const saved = localStorage.getItem('loginHistory');
            if (saved) {
                loginHistory = JSON.parse(saved);
            }
        }

        function saveHistory() {
            localStorage.setItem('loginHistory', JSON.stringify(loginHistory));
        }

        function addLoginRecord(status, username, reason = '') {
            const record = {
                status,
                username,
                timestamp: new Date().toISOString(),
                ip: getIPAddress(),
                device: getDeviceInfo(),
                location: 'Jakarta, Indonesia',
                reason
            };
            
            loginHistory.unshift(record);
            if (loginHistory.length > 50) {
                loginHistory = loginHistory.slice(0, 50);
            }
            
            saveHistory();
        }

        function getIPAddress() {
            // Simulated IP - in production, use real IP detection
            return `192.168.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`;
        }

        function getDeviceInfo() {
            const ua = navigator.userAgent;
            if (ua.includes('Windows')) return 'Windows PC';
            if (ua.includes('Mac')) return 'MacBook';
            if (ua.includes('iPhone')) return 'iPhone';
            if (ua.includes('Android')) return 'Android';
            return 'Unknown Device';
        }

        function renderHistory() {
            const container = document.getElementById('historyList');
            
            if (loginHistory.length === 0) {
                container.innerHTML = '<p style="color: var(--ios-gray); text-align: center; padding: 40px 0;">Belum ada riwayat login</p>';
                return;
            }
            
            container.innerHTML = loginHistory.map(item => {
                const date = new Date(item.timestamp);
                const timeStr = date.toLocaleString('id-ID', {
                    day: '2-digit',
                    month: 'short',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                return `
                    <div class="history-item">
                        <div class="history-header">
                            <div class="history-status">
                                <span class="status-badge ${item.status}">${item.status === 'success' ? '‚úì Berhasil' : '‚úó Gagal'}</span>
                                <strong>${item.username}</strong>
                            </div>
                            <span class="history-time">${timeStr}</span>
                        </div>
                        <div class="history-meta">
                            <span>üìç ${item.location}</span>
                            <span>üíª ${item.device}</span>
                            <span>üåê ${item.ip}</span>
                        </div>
                        ${item.reason ? `<div class="history-details">${item.reason}</div>` : ''}
                    </div>
                `;
            }).join('');
        }

        // 7. MODAL MANAGEMENT
        function openHistoryModal() {
            loadHistory();
            renderHistory();
            renderRecentDevices();
            document.getElementById('historyModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeHistoryModal() {
            document.getElementById('historyModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        function closeModalOnBackdrop(event) {
            if (event.target === event.currentTarget) {
                closeHistoryModal();
            }
        }

        function switchTab(tab) {
            // Update tabs
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update content
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            if (tab === 'activity') {
                document.getElementById('activityTab').classList.add('active');
            } else {
                document.getElementById('devicesTab').classList.add('active');
            }
        }

        // 8. SESSION MANAGEMENT
        function initializeSessionManagement() {
            const lastActivity = localStorage.getItem('lastActivity');
            if (lastActivity) {
                const elapsed = Date.now() - parseInt(lastActivity);
                if (elapsed > CONFIG.SESSION_TIMEOUT) {
                    // Session expired - silent
                }
            }
            
            // Update last activity on user interaction
            ['click', 'keypress', 'scroll', 'mousemove'].forEach(event => {
                document.addEventListener(event, () => {
                    localStorage.setItem('lastActivity', Date.now().toString());
                });
            });
        }

        function startSessionTimer() {
            // Clear existing timers
            if (sessionTimer) clearTimeout(sessionTimer);
            if (sessionWarningTimer) clearTimeout(sessionWarningTimer);
            
            // Set warning timer
            sessionWarningTimer = setTimeout(() => {
                const warningDiv = document.getElementById('sessionWarning');
                warningDiv.classList.add('show');
                
                let secondsLeft = CONFIG.SESSION_WARNING / 1000;
                const timerSpan = document.getElementById('sessionTimer');
                
                const countdown = setInterval(() => {
                    const minutes = Math.floor(secondsLeft / 60);
                    const seconds = secondsLeft % 60;
                    timerSpan.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                    secondsLeft--;
                    
                    if (secondsLeft < 0) {
                        clearInterval(countdown);
                    }
                }, 1000);
            }, CONFIG.SESSION_TIMEOUT - CONFIG.SESSION_WARNING);
            
            // Set logout timer
            sessionTimer = setTimeout(() => {
                window.location.href = 'index.html';
            }, CONFIG.SESSION_TIMEOUT);
        }

        // 9. REMEMBER ME
        function saveRememberedUser(username) {
            const rememberMe = document.getElementById('rememberMe').checked;
            
            if (rememberMe) {
                localStorage.setItem('rememberedUser', JSON.stringify({
                    username,
                    timestamp: Date.now()
                }));
            } else {
                localStorage.removeItem('rememberedUser');
            }
        }

        // 10. LOGIN STREAK
        function updateLoginStreak() {
            const today = new Date().toDateString();
            const lastLogin = localStorage.getItem('lastLoginDate');
            let streak = parseInt(localStorage.getItem('loginStreak')) || 0;
            
            if (lastLogin) {
                const lastDate = new Date(lastLogin);
                const daysDiff = Math.floor((new Date(today) - lastDate) / (1000 * 60 * 60 * 24));
                
                if (daysDiff === 1) {
                    streak++;
                } else if (daysDiff > 1) {
                    streak = 1;
                }
            } else {
                streak = 1;
            }
            
            localStorage.setItem('loginStreak', streak.toString());
            localStorage.setItem('lastLoginDate', today);
            
            // Update badges
            updateBadges(streak);
            
            document.getElementById('streakCount').textContent = streak;
            document.getElementById('userStats').style.display = 'flex';
        }

        function updateBadges(loginStreak) {
            let badges = JSON.parse(localStorage.getItem('userBadges')) || [];
            
            if (loginStreak >= 3 && !badges.includes('3day_streak')) {
                badges.push('3day_streak');
            }
            
            if (loginStreak >= 7 && !badges.includes('7day_streak')) {
                badges.push('7day_streak');
            }
            
            const hour = new Date().getHours();
            if ((hour >= 22 || hour < 5) && !badges.includes('night_owl')) {
                badges.push('night_owl');
            }
            
            localStorage.setItem('userBadges', JSON.stringify(badges));
            document.getElementById('badgeCount').textContent = badges.length;
        }

        // 11. RECENT DEVICES
        function updateRecentDevices() {
            let devices = JSON.parse(localStorage.getItem('recentDevices')) || [];
            
            const currentDevice = {
                name: getDeviceInfo(),
                ip: getIPAddress(),
                time: new Date().toLocaleString('id-ID')
            };
            
            devices.unshift(currentDevice);
            devices = devices.slice(0, 3);
            
            localStorage.setItem('recentDevices', JSON.stringify(devices));
        }

        function renderRecentDevices() {
            const devices = JSON.parse(localStorage.getItem('recentDevices')) || [];
            const container = document.getElementById('devicesList');
            
            if (devices.length === 0) {
                container.innerHTML = '<p style="color: var(--ios-gray); font-size: 14px; text-align: center; padding: 40px 0;">Belum ada perangkat terdaftar</p>';
                return;
            }
            
            container.innerHTML = devices.map((device, index) => `
                <div class="device-item">
                    <div class="device-icon">üíª</div>
                    <div class="device-info">
                        <div class="device-name">${device.name}</div>
                        <div class="device-detail">${device.ip} ‚Ä¢ ${device.time}</div>
                    </div>
                    ${index === 0 ? '<span class="device-badge">Saat Ini</span>' : ''}
                </div>
            `).join('');
        }

        // 12. EXPORT HISTORY
        function exportHistory(format) {
            if (loginHistory.length === 0) {
                return;
            }
            
            if (format === 'json') {
                const dataStr = JSON.stringify(loginHistory, null, 2);
                downloadFile('login-history.json', dataStr, 'application/json');
            } else if (format === 'csv') {
                const csv = convertToCSV(loginHistory);
                downloadFile('login-history.csv', csv, 'text/csv');
            }
        }

        function convertToCSV(data) {
            const headers = ['Status', 'Username', 'Timestamp', 'IP', 'Device', 'Location', 'Reason'];
            const rows = data.map(item => [
                item.status,
                item.username,
                new Date(item.timestamp).toLocaleString(),
                item.ip,
                item.device,
                item.location,
                item.reason || ''
            ]);
            
            return [
                headers.join(','),
                ...rows.map(row => row.map(cell => `"${cell}"`).join(','))
            ].join('\n');
        }

        function downloadFile(filename, content, type) {
            const blob = new Blob([content], { type });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        }

        // 13. MAINTENANCE MODE
        function toggleMaintenanceMode() {
            maintenanceMode = !maintenanceMode;
            const banner = document.getElementById('maintenanceBanner');
            
            if (maintenanceMode) {
                banner.style.display = 'flex';
                localStorage.setItem('maintenanceMode', 'true');
            } else {
                banner.style.display = 'none';
                localStorage.removeItem('maintenanceMode');
            }
        }

        function checkMaintenanceMode() {
            const isMaintenanceMode = localStorage.getItem('maintenanceMode') === 'true';
            if (isMaintenanceMode) {
                maintenanceMode = true;
                document.getElementById('maintenanceBanner').style.display = 'flex';
            }
        }

        // 14. BIOMETRIC LOGIN
        function handleBiometric() {
            // Create biometric modal
            const modal = document.createElement('div');
            modal.className = 'biometric-modal';
            modal.innerHTML = `
                <div class="biometric-content">
                    <div class="biometric-scanner">
                        <div class="fingerprint-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"/>
                            </svg>
                        </div>
                        <div class="scan-ring"></div>
                        <div class="scan-ring-2"></div>
                    </div>
                    <h3 class="biometric-title">Autentikasi Sidik Jari</h3>
                    <p class="biometric-subtitle">Letakkan jari Anda pada sensor</p>
                    <button class="biometric-cancel" onclick="closeBiometricModal()">Batal</button>
                </div>
            `;
            document.body.appendChild(modal);
            
            // Add animation styles if not exists
            if (!document.getElementById('biometricStyles')) {
                const style = document.createElement('style');
                style.id = 'biometricStyles';
                style.textContent = `
                    .biometric-modal {
                        position: fixed;
                        top: 0;
                        left: 0;
                        right: 0;
                        bottom: 0;
                        background: rgba(0, 0, 0, 0.6);
                        backdrop-filter: blur(10px);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        z-index: 10000;
                        animation: fadeIn 0.3s;
                    }
                    
                    .biometric-content {
                        background: var(--ios-bg-secondary);
                        border-radius: 24px;
                        padding: 48px 32px;
                        text-align: center;
                        max-width: 340px;
                        animation: scaleIn 0.3s cubic-bezier(0.16, 1, 0.3, 1);
                    }
                    
                    @keyframes scaleIn {
                        from {
                            opacity: 0;
                            transform: scale(0.9);
                        }
                        to {
                            opacity: 1;
                            transform: scale(1);
                        }
                    }
                    
                    .biometric-scanner {
                        position: relative;
                        width: 120px;
                        height: 120px;
                        margin: 0 auto 24px;
                    }
                    
                    .fingerprint-icon {
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        width: 80px;
                        height: 80px;
                        color: var(--ios-blue);
                        animation: pulse 2s ease-in-out infinite;
                    }
                    
                    .fingerprint-icon svg {
                        width: 100%;
                        height: 100%;
                    }
                    
                    @keyframes pulse {
                        0%, 100% {
                            opacity: 1;
                            transform: translate(-50%, -50%) scale(1);
                        }
                        50% {
                            opacity: 0.6;
                            transform: translate(-50%, -50%) scale(1.05);
                        }
                    }
                    
                    .scan-ring {
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        width: 100px;
                        height: 100px;
                        border: 3px solid var(--ios-blue);
                        border-radius: 50%;
                        opacity: 0.3;
                        animation: ripple 2s ease-out infinite;
                    }
                    
                    .scan-ring-2 {
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        width: 100px;
                        height: 100px;
                        border: 3px solid var(--ios-blue);
                        border-radius: 50%;
                        opacity: 0.3;
                        animation: ripple 2s ease-out infinite 1s;
                    }
                    
                    @keyframes ripple {
                        0% {
                            width: 100px;
                            height: 100px;
                            opacity: 0.3;
                        }
                        100% {
                            width: 140px;
                            height: 140px;
                            opacity: 0;
                        }
                    }
                    
                    .biometric-title {
                        font-size: 20px;
                        font-weight: 600;
                        color: var(--ios-label);
                        margin-bottom: 8px;
                    }
                    
                    .biometric-subtitle {
                        font-size: 15px;
                        color: var(--ios-gray);
                        margin-bottom: 32px;
                    }
                    
                    .biometric-cancel {
                        width: 100%;
                        padding: 14px;
                        background: var(--ios-gray-6);
                        border: none;
                        border-radius: 12px;
                        font-size: 16px;
                        font-weight: 500;
                        color: var(--ios-blue);
                        cursor: pointer;
                        transition: all 0.2s;
                    }
                    
                    .biometric-cancel:hover {
                        background: var(--ios-gray-5);
                    }
                    
                    .biometric-success .fingerprint-icon {
                        color: var(--ios-green);
                        animation: successPulse 0.5s ease-out;
                    }
                    
                    .biometric-success .scan-ring,
                    .biometric-success .scan-ring-2 {
                        border-color: var(--ios-green);
                    }
                    
                    @keyframes successPulse {
                        0% {
                            transform: translate(-50%, -50%) scale(1);
                        }
                        50% {
                            transform: translate(-50%, -50%) scale(1.2);
                        }
                        100% {
                            transform: translate(-50%, -50%) scale(1);
                        }
                    }
                `;
                document.head.appendChild(style);
            }
            
            // Simulate scanning process
            setTimeout(() => {
                const scanner = modal.querySelector('.biometric-scanner');
                const subtitle = modal.querySelector('.biometric-subtitle');
                
                // Change to processing
                subtitle.textContent = 'Memproses...';
                
                // Simulate successful scan
                setTimeout(() => {
                    scanner.classList.add('biometric-success');
                    subtitle.textContent = 'Autentikasi Berhasil!';
                    
                    // Auto login
                    setTimeout(() => {
                        closeBiometricModal();
                        
                        // Get remembered username or use default
                        const remembered = localStorage.getItem('rememberedUser');
                        let username = 'admin';
                        
                        if (remembered) {
                            const userData = JSON.parse(remembered);
                            username = userData.username;
                        }
                        
                        // Perform login
                        saveRememberedUser(username);
                        updateRecentDevices();
                        updateLoginStreak();
                        
                        addLoginRecord('success', username, 'Login via sidik jari');
                        startSessionTimer();
                        
                        setTimeout(() => {
                            window.location.href = 'dasbord.html';
                        }, 500);
                    }, 800);
                }, 1500);
            }, 1000);
        }
        
        function closeBiometricModal() {
            const modal = document.querySelector('.biometric-modal');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s';
                setTimeout(() => modal.remove(), 300);
            }
        }

        // 15. KEYBOARD SHORTCUTS
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + K: Focus username
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                document.getElementById('username').focus();
                showShortcutHint('‚åòK - Focus Username');
            }
            
            // Ctrl/Cmd + H: Open history
            if ((e.ctrlKey || e.metaKey) && e.key === 'h') {
                e.preventDefault();
                openHistoryModal();
                showShortcutHint('‚åòH - Riwayat Login');
            }
            
            // Escape: Close modal
            if (e.key === 'Escape') {
                closeHistoryModal();
            }
        });

        function showShortcutHint(text) {
            const hint = document.createElement('div');
            hint.className = 'shortcut-hint show';
            hint.textContent = text;
            document.body.appendChild(hint);
            
            setTimeout(() => {
                hint.classList.remove('show');
                setTimeout(() => hint.remove(), 300);
            }, 2000);
        }

        // 16. LOGIN HANDLER
        function handleLogin(event) {
            event.preventDefault();
            
            // Check lockout
            if (lockoutUntil && Date.now() < lockoutUntil) {
                return;
            }
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            clearError('username');
            clearError('password');
            
            const usernameError = validateUsername(username);
            if (usernameError) {
                showError('username', usernameError);
                return;
            }
            
            const passwordError = validatePassword(password);
            if (passwordError) {
                showError('password', passwordError);
                return;
            }

            const button = document.getElementById('loginBtn');
            button.classList.add('loading');
            button.disabled = true;

            setTimeout(() => {
                if (password === CONFIG.CORRECT_PASSWORD) {
                    // Reset attempts
                    loginAttempts = 0;
                    lockoutUntil = null;
                    
                    saveRememberedUser(username);
                    updateRecentDevices();
                    updateLoginStreak();
                    
                    addLoginRecord('success', username);
                    startSessionTimer();
                    
                    setTimeout(() => {
                        window.location.href = 'dasbord.html';
                    }, 1000);
                } else {
                    loginAttempts++;
                    
                    if (loginAttempts >= CONFIG.MAX_LOGIN_ATTEMPTS) {
                        lockoutUntil = Date.now() + CONFIG.LOCKOUT_TIME;
                        addLoginRecord('failed', username, 'Akun terkunci - terlalu banyak percobaan');
                    } else {
                        addLoginRecord('failed', username, 'Password salah');
                        showError('password', 'Username atau password salah');
                    }
                    
                    button.classList.remove('loading');
                    button.disabled = false;
                    document.getElementById('password').value = '';
                }
            }, 1000);
        }

        // 17. INITIALIZATION
        window.addEventListener('load', function() {
            createParticles();
            checkMaintenanceMode();
            
            const remembered = localStorage.getItem('rememberedUser');
            if (remembered) {
                const userData = JSON.parse(remembered);
                document.getElementById('username').value = userData.username;
                document.getElementById('rememberMe').checked = true;
            }
            
            loadHistory();
            initializeSessionManagement();
            setupPasswordStrengthIndicator();
            document.getElementById('username').focus();
            
            // Show user stats if has streak
            const savedStreak = parseInt(localStorage.getItem('loginStreak')) || 0;
            const savedBadges = JSON.parse(localStorage.getItem('userBadges')) || [];
            if (savedStreak > 0 || savedBadges.length > 0) {
                document.getElementById('streakCount').textContent = savedStreak;
                document.getElementById('badgeCount').textContent = savedBadges.length;
                document.getElementById('userStats').style.display = 'flex';
            }
        });
    </script>
</body>
</html>